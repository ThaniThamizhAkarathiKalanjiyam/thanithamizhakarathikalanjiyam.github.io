function startYearChange(e, a, t) { $(e).change(function () { var n, r = $(e).val(), o = $(a); o.html(""), o.append($('<option value="">End Year</option>')), "" != r && ((n = $("#loading-progress")).show(), $.ajax({ cache: !1, type: "GET", url: t, data: { startYear: r, addEmptyYearIfRequired: "true" }, success: function (e) { $.each(e, function (e, a) { o.append($("<option></option>").val(a.id).html(a.name)) }), n.hide() }, error: function () { n.hide() } })) }) } function DropdwonClear(e, a) { var t = $("#" + e); t.html(""), t.append($('<option value="">' + a + "</option>")) } function CheckValidView() { GetPageViewCount() } function GetPageViewCount() { var e = $("#hdnUserID").val(); $.ajax({ cache: !1, type: "POST", async: !1, url: "https://" + DomainName + "/Common/GetDownloadedContentCount", data: { userId: e }, success: function (e) { e ? $("#PageViewModal").modal("show") : window.location.href = redirectionUrl }, error: function () { } }) } function SetPageViewCount() { var e = $("#hdnUserID").val(); $.ajax({ cache: !1, type: "POST", url: "https://" + DomainName + "/Common/SetDownloadedContentCount", data: { userId: e, fileType: "PageView" }, success: function () { window.location.href = redirectionUrl }, error: function () { } }) } var redirectionUrl, DomainName = window.document.location.host.toString(); $(document).ready(function () { if ($.ajax({ cache: !1, dataType: "json", type: "POST", async: !0, url: "https://" + DomainName + "/Home/ajaxthumbLoadingInformation", success: function (e) { var a, t = $("#hdn_IsCheckpageViewCount").val(), n = $("#hdn_userID").val(), r = $("#hdn_paysite").val(); a = "True" === t && n > 0 && "true" == r ? "<div class='image loaderimg'><a href='" + e.pubURL + "/' class='pageviewcheck'><img class='lazyload' src='https://" + DomainName + "/thumbimage.ashx?i=" + e.imageid + "' alt='NewspaperArchive.com trans' /></a></div><div class='detail txtColor'>" + e.pubtitle + ", <span>" + e.pubdate + "</span></div>" : "<div class='image loaderimg'><a href='" + e.pubURL + "/'><img class='lazyload' src='https://" + DomainName + "/thumbimage.ashx?i=" + e.imageid + "' alt='NewspaperArchive.com trans' /></a></div><div class='detail txtColor'>" + e.pubtitle + ", <span>" + e.pubdate + "</span></div>", $("#publicationImage").html(a), $(".pageviewcheck").click(function () { redirectionUrl = $(this).attr("href"), SetPageViewCount() }) }, error: function () { } }), $("#SearchnameorKeyword").on("click", function () { var e = $("#HomeKeywordSearch").val(); return !($.trim(e).length < 2 || "enter name(s) or keyword(s)" == $.trim(e).toLowerCase()) || (alert("Please enter name(s) or keyword(s). Name(s) or Keyword(s) must be greater than 1 character."), !1) }), $("#Dates_BetweenStartYear").change(function () { $("#rbBetweenYears").attr("checked", "checked"), "" != $("#Dates_BetweenStartYear").val() ? ($("#Dates_IsPublicationDate").attr("checked", "checked"), $("#Dates_IsExactDate").val("false"), $("#Dates_IsBetweenYears").val("true"), $("#Dates_IsBetweenDates").val("false"), $("#Dates_StartYear").val(""), $("#Dates_StartMonth").val(""), $("#Dates_StartDay").val(""), $("#Dates_BetweenDatesYear").val(""), $("#Dates_BetweenDatesMonth").val(""), $("#Dates_BetweenDatesDay").val(""), DropdwonClear("Dates_EndYear", "End Year"), $("#Dates_EndMonth").val(""), $("#Dates_EndDay").val("")) : ($("#Dates_IsPublicationDate").removeAttr("checked"), $("#Dates_IsExactDate").val("false"), $("#Dates_IsBetweenYears").val("false"), $("#Dates_IsBetweenDates").val("false")) }), $("#Dates_BetweenEndYear").change(function () { $("#rbBetweenYears").attr("checked", "checked"), "" != $("#Dates_BetweenEndYear").val() ? ($("#Dates_IsPublicationDate").attr("checked", "checked"), $("#Dates_IsExactDate").val("false"), $("#Dates_IsBetweenYears").val("true"), $("#Dates_IsBetweenDates").val("false"), $("#Dates_StartYear").val(""), $("#Dates_StartMonth").val(""), $("#Dates_StartDay").val(""), $("#Dates_BetweenDatesYear").val(""), $("#Dates_BetweenDatesMonth").val(""), $("#Dates_BetweenDatesDay").val(""), $("#Dates_EndYear").val(""), $("#Dates_EndMonth").val(""), $("#Dates_EndDay").val("")) : ($("#Dates_IsPublicationDate").removeAttr("checked"), $("#Dates_IsExactDate").val("false"), $("#Dates_IsBetweenYears").val("false"), $("#Dates_IsBetweenDates").val("false")) }), $("#Dates_BetweenStartYear").length > 0) { var e = "https://" + DomainName + "/Date/GetEndYears"; startYearChange($("#Dates_BetweenStartYear"), $("#Dates_BetweenEndYear"), e) } if ("true" == $("#hdn_ShowPopup").val() && $("#hdnUserID").val() > 0 && "" != $("#Hdn_ActiveAccount").val() && 0 == $("#Hdn_ActiveAccount").val() && $("#Hdn_EndDate").val() < $("#Hdn_CurrentDate").val()) { setTimeout(function () { $("#UpgradeButton").prop("href", $("#hdn_UpgradeUrl").val()) }, 500), function (e, a, t) { var n = new Date; n.setDate(n.getDate() + t), a = escape(a) + (null == t ? "" : "; expires=" + n.toUTCString() + "; path=/"), document.cookie = e + "=" + a }("upgradeSubscribe", "true", "1") } }), redirectionUrl = "", ("/confirmlogin/" == window.location.pathname || "/confirmlogin" == window.location.pathname) && $(".navigation,.footerNav,.rightNav,#CancelSession").on("click", function () { if ($.cookie("Branded.newspaperarchive.com.Login", null, { path: "/" }), "CancelSession" == this.id) { var e = document.location.host.toString(); document.location.href = "https://" + e + "/login/" } }), $(document).ready(function () { $(".pageviewcheck").click(function () { redirectionUrl = $(this).attr("href"), SetPageViewCount() }) });